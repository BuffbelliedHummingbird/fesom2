! Namelist for PDAF configuration 
&pdaf

! General settings for PDAF:
delt_obs_ocn=32        ! Time step interval between filter analyses
                       ! for daily obs, this should be set equal to 
                       ! step_per_day in namelist.config
filtertype=7           ! Choose filter algorithm
locweight=4            ! Set weighting function for localization
local_range=2.0e5      ! Cut-off radius for localization
srange=2.0e5           ! Support radius for weighting function
forget=0.990           ! Set forgetting factor
loctype=0
varscale=1.0
type_trans=2           ! Type of ensemble transformation in (L)ESTKF/(L)SEIK/(L)ETKF
type_forget=0          ! Set type of forgetting factor
screen=2               ! set verbosity of PDAF
printconfig=.true.
twin_experiment=.false.
step_null=0            ! 0 for restart at first day of the year. Is reset by runscript.
days_since_DAstart=1   ! 1 at the beginning. Is reset by runscript.

path_init='/albedo/work/projects/p_recompdaf/frbunsen/modelruns/physics_covar/dist_cov72/'
file_init='cov_'
DAoutput_path='/albedo/work/projects/p_recompdaf/frbunsen/modelruns/fesom2/FESOM_PDAF_TEST72/work/'
write_monthly_mean=.false. ! true: monthly output; false: daily output
write_ens=.false.          ! whether to write output for individual ensemble members

ASIM_START_USE_CLIM_STATE=.false.
this_is_pdaf_restart=.true.
use_global_obs=0

ASSIM_O_ssh = .false.
path_obs_ssh='/albedo/work/projects/p_recompdaf/frbunsen/data/physics/SSH/CMEMS/CORE2/dist_72/'
file_ssh_prefix='SSH_track_2016_dist72_'
file_ssh_suffix ='.nc'
rms_obs_ssh= 0.05
ssh_fixed_rmse=.true.
bias_obs_ssh=0.5
lradius_ssh=3.0e5

ASSIM_O_sst = .false.
path_obs_sst='/albedo/work/projects/p_recompdaf/frbunsen/data/physics/SST/OSTIA/CORE2/dist_72/'
file_sst_prefix='OSTIA_SST_20160101_20161231_daily_dist72_'
file_sst_suffix ='.nc'
rms_obs_sst=0.8
sst_fixed_rmse=.true.
sst_exclude_ice=.true.
sst_exclude_diff=2.4                                                    ! Rule of thumb: 3 times observation error (typically 0.8 degC --> 2.4 degC)

ASSIM_O_sss = .false.
path_obs_sss='/albedo/work/projects/p_recompdaf/frbunsen/data/physics/SSS/ESA_SMOS/CORE2/dist_72/'
file_sss_prefix='SMOS_SSS_2016_dist72_'
file_sss_suffix ='.nc'
rms_obs_sss=0.5
sss_fixed_rmse=.true.
sss_exclude_ice=.true.
sss_exclude_diff=0

ASSIM_O_sss_cci = .false.
path_obs_sss_cci='/albedo/work/projects/p_recompdaf/frbunsen/data/physics/SSS/CCI/CORE2/dist_72/'
file_sss_cci_prefix=''
file_sss_cci_suffix ='.nc'
rms_obs_sss_cci=0.5
sss_cci_fixed_rmse=.true.
sss_cci_exclude_ice=.true.
sss_cci_exclude_diff=0

ASSIM_O_en4_t = .false.
ASSIM_O_en4_s = .false.
path_obs_prof='/albedo/work/projects/p_recompdaf/frbunsen/data/physics/Temp-Salt-3D/EN4/fesom-pdaf-processed_dist_72/'
file_prof_prefix='obs_profile_'
file_prof_suffix='.nc'
rms_obs_T=0.8
rms_obs_S=0.5
path_obs_rawprof='/albedo/work/projects/p_recompdaf/frbunsen/data/physics/Temp-Salt-3D/EN4/'
file_rawprof_prefix='EN.4.2.2.f.profiles.c14.'
proffiles_o=0                                                           ! 0: No processing of EN4 raw profile data.
                                                                        ! 1: Processing of EN4 raw profile data to distributed files.
start_year_o = 2016
end_year_o   = 2016

assim_o_chl_cci = .false.
rms_obs_chl_cci = 1.5
path_obs_chl_cci = '/albedo/work/projects/p_recompdaf/frbunsen/data/BGC/chlsurf_OC-CCI/CORE2_daily/dist_72/'
file_chl_cci_prefix = ''
file_chl_cci_suffix = '.nc'
chl_cci_exclude_ice = .true.
chl_cci_exclude_diff = 0
bias_obs_chl_cci = 0
chl_cci_fixed_rmse = .false.

assim_o_DIC_glodap = .true.
path_obs_DIC_glodap = '/albedo/work/projects/p_recompdaf/frbunsen/data/BGC/GLODAP/DIC/'
rms_obs_DIC_glodap = 30.0

path_atm_cov = '/albedo/work/projects/p_recompdaf/frbunsen/data/jra_core2/dist72_cov/'

! Wether to perturb BGC parameters:
perturb_parameters=.true.
perturb_scale=0.25

assimilateBGC=.true.  ! false to de-activate BGC assimilation
assimilatePHY=.false. ! false to de-activate physics assimilation
/

! Settings for Parallelization:
&pdaf_parallel

dim_ens=4
/

! Which state variables to be updated:
&updated

upd_ssh   =.true.
upd_u     =.true.
upd_v     =.true.
upd_w     =.false.
upd_temp  =.true.
upd_salt  =.true.
upd_ice   =.false.
upd_MLD1  =.false.

upd_PhyChl    = .true.
upd_DiaChl    = .true.
upd_DIC       = .true.
upd_DOC       = .true.
upd_Alk       = .true.
upd_DIN       = .true.
upd_DON       = .true.
upd_O2        = .true.
upd_pCO2s     = .false.
upd_CO2f      = .false.
upd_DiaN      = .true.
upd_DiaC      = .true.
upd_PAR       = .false.
upd_NPPn      = .false.
upd_NPPd      = .false.
upd_DetC      = .true.
upd_PhyCalc   = .true.
upd_export    = .false.
upd_alphaCO2  = .false.
upd_PistonVel = .false.
upd_Zo1C      = .true.
upd_Zo1N      = .true.
upd_Zo2C      = .true.
upd_Zo2N      = .true.
/

! Namelist for atmosphere stochasticity:
&atmos_stoch

disturb_xwind=.true.
disturb_ywind=.true.
disturb_humi=.true.
disturb_qlw=.true.
disturb_qsr=.false.
disturb_tair=.true.
disturb_prec=.false.
disturb_snow=.false.
disturb_mslp=.false.

varscale_wind = 0.2
varscale_tair = 1.0
varscale_humi = 1.0
varscale_qlw  = 1.0

write_atmos_st = .false. ! whether to protocol perturbed atmospheric fields (every member at every step)
/
